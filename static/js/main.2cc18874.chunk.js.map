{"version":3,"sources":["utils/mestoAuth.js","contexts/CurrentUserContext.js","components/ProtectedRoute.js","components/Header.js","utils/api.js","components/Card.js","components/Main.js","components/Login.js","components/Register.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","components/ImagePopup.js","components/InfoTooltip.js","components/Spinner.js","components/App.js","reportWebVitals.js","index.js"],"names":["BASE_URL","checkResponse","response","ok","json","Promise","reject","statusText","CurrentUserContext","React","createContext","ProtectedRoute","Component","component","props","loggedIn","to","Header","userEmail","handleSignOut","location","useLocation","signOut","className","href","target","rel","param","onClick","renderSwitch","pathname","api","options","this","_baseUrl","baseUrl","_headers","headers","fetch","then","_checkResponse","data","method","body","JSON","stringify","cardId","status","_likeCard","_dislikeCard","link","avatar","res","authorization","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","src","alt","name","type","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","about","map","Login","state","username","password","handleChange","bind","handleSubmit","e","value","setState","preventDefault","handleLogin","onSubmit","required","placeholder","onChange","withRouter","Register","handleRegister","Footer","lang","PopupWithForm","title","btnCaption","isOpen","onClose","children","noValidate","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","id","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","urlRef","useRef","current","ref","AddPlacePopup","setLink","DeleteCardPopup","onDeleteCard","ImagePopup","InfoTooltip","registerStatus","message","Spinner","App","history","useHistory","setLoggedIn","setUserEmail","setCurrentUser","setRegisterStatus","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isDeletePopupOpen","setDeletePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setCards","selectedCard","setSelectedCard","isLoading","setIsLoading","cardToDelete","setCardToDelete","closeAllPopups","jwt","localStorage","getItem","token","email","push","catch","err","console","log","handleTokenCheck","all","getInitialInfo","getInitialCards","info","cardsArr","Provider","removeItem","path","mestoAuth","setItem","changeLikeCardStatus","newCard","c","setUserInfo","createNewCard","deleteCard","filter","setUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2cc18874.chunk.js","sourcesContent":["export const BASE_URL = 'https://auth.nomoreparties.co';\r\nconst checkResponse = response => {\r\n    return response.ok ? response.json() : Promise.reject(`Что-то пошло не так: ${response.statusText}`);\r\n}\r\nexport const register = (email, password) => {\r\n    return fetch(`${BASE_URL}/signup`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ password, email })\r\n    })\r\n        .then(checkResponse);\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n    return fetch(`${BASE_URL}/signin`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ password, email })\r\n    })\r\n        .then(checkResponse);\r\n}\r\n\r\nexport const checkToken = (token) => {\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`,\r\n        }\r\n    })\r\n        .then(checkResponse)\r\n}","import React from \"react\";\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n    return (\r\n        <Route>\r\n            {\r\n                () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n            }\r\n        </Route>\r\n    )\r\n}\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\nfunction Header({ userEmail, handleSignOut }) {\r\n    const location = useLocation();\r\n    function signOut() {\r\n        handleSignOut();\r\n    }\r\n    function renderSwitch(param) {\r\n        switch (param) {\r\n            case '/sign-up':\r\n                return (<Link to=\"/sign-in\" className=\"header__link\">Войти</Link>);\r\n            case '/sign-in':\r\n                return (<Link to=\"/sign-up\" className=\"header__link\">Регистрация</Link>);\r\n            default:\r\n                return (<Link to=\"/sign-in\" onClick={signOut} className=\"header__link\">Выйти</Link>);\r\n        }\r\n    }\r\n    return (\r\n        <header className=\"header\">\r\n            <a className=\"header__logo\" href=\"https://ilyadedov-yandex.github.io/mesto-react/\" target=\"_self\" rel=\"noopener noreferrer\"></a>\r\n            <div className=\"header__container\">\r\n                {userEmail && <p className=\"header__email\">{userEmail}</p>}\r\n                {renderSwitch(location.pathname)}\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","class Api {\r\n    constructor(options) {\r\n        this._baseUrl = options.baseUrl;\r\n        this._headers = options.headers;\r\n    }\r\n    getInitialInfo() {\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n            headers: this._headers\r\n        })\r\n            .then(this._checkResponse)\r\n    };\r\n\r\n    getInitialCards() {\r\n        return fetch(`${this._baseUrl}/cards`, {\r\n            headers: this._headers\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n\r\n    setUserInfo(data) {\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n    createNewCard(data) {\r\n        return fetch(`${this._baseUrl}/cards`, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n    deleteCard(cardId) {\r\n        return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers,\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n    _likeCard(cardId) {\r\n        return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n            method: 'PUT',\r\n            headers: this._headers,\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n    _dislikeCard(cardId) {\r\n        return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers,\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n    changeLikeCardStatus(cardId, status) {\r\n        return status ? this._likeCard(cardId) : this._dislikeCard(cardId);\r\n    }\r\n    setUserAvatar(link) {\r\n        return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: link\r\n            })\r\n        })\r\n            .then(this._checkResponse)\r\n    }\r\n    _checkResponse(res) {\r\n        if (!res.ok) {\r\n            return Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n        }\r\n        return res.json();\r\n    }\r\n}\r\nexport const api = new Api({\r\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-27',\r\n    headers: {\r\n        authorization: '2d3e1cdc-e394-4bd9-a5ca-873b1a753e66',\r\n        'Content-Type': 'application/json'\r\n    }\r\n});","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = card.owner._id === currentUser._id;\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    const cardLikeButtonClassName = `element__like-btn ${isLiked && 'element__like-btn_active'}`;\r\n    function handleClick() {\r\n        onCardClick(card);\r\n    }\r\n    function handleLikClick() {\r\n        onCardLike(card);\r\n    }\r\n    function handleDeleteClick() {\r\n        onCardDelete(card);\r\n    }\r\n    return (\r\n        <li className=\"element\">\r\n            <img onClick={handleClick} className=\"element__image\" src={card.link} alt={card.name} />\r\n            {isOwn && <button onClick={handleDeleteClick} type=\"button\" className=\"element__delete-btn\" aria-label=\"Удалить карточку\"></button>}\r\n            <div className=\"element__caption-container\">\r\n                <h2 className=\"element__caption\">{card.name}</h2>\r\n                <div>\r\n                    <button onClick={handleLikClick} type=\"button\" className={cardLikeButtonClassName} aria-label=\"Поставить лайк\"></button>\r\n                    <p className=\"element__like-counter\">{card.likes.length}</p>\r\n                </div>\r\n            </div>\r\n        </li >\r\n    );\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Card from './Card';\r\nfunction Main({ onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete }) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    return (\r\n        <main className=\"main\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__group\">\r\n                    <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар\" />\r\n                    <div className=\"profile__avatar-edit\" onClick={onEditAvatar}></div>\r\n                </div>\r\n                <div className=\"profile__info\">\r\n                    <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n                    <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n                    <button onClick={onEditProfile} type=\"button\" className=\"profile__edit-button\" aria-label=\"Изменить профайл\"></button>\r\n                </div>\r\n                <button onClick={onAddPlace} type=\"button\" className=\"profile__add-button\" aria-label=\"Добавить профайл\"></button>\r\n\r\n            </section>\r\n            <section className=\"elements\">\r\n                <ul className=\"elements__list\">\r\n                    {cards.map((card) => <Card card={card} key={card._id} onCardClick={onCardClick} onCardLike={onCardLike} onCardDelete={onCardDelete} />)}\r\n                </ul>\r\n            </section>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from \"react\";\r\nimport { withRouter } from 'react-router-dom';\r\nclass Login extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: ''\r\n        }\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n\r\n    }\r\n    handleChange(e) {\r\n        const { name, value } = e.target;\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        const { username, password } = this.state;\r\n        if (!username || !password) {\r\n            return;\r\n        }\r\n        this.setState({ username: '', password: '' }, () => {\r\n            this.props.handleLogin(username, password);\r\n        })\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"login\">\r\n                <h2 className=\"login__welcome\">Вход</h2>\r\n                <form className=\"login__form\" onSubmit={this.handleSubmit}>\r\n                    <input required className=\"login__input\" name=\"username\" placeholder=\"Email\" type=\"text\" onChange={this.handleChange} value={this.state.username} />\r\n                    <input required className=\"login__input\" name=\"password\" placeholder=\"Пароль\" type=\"password\" onChange={this.handleChange} value={this.state.password} />\r\n                    <button type=\"submit\" className=\"login__btn\">Войти</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(Login);","import React from \"react\";\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport * as mestoAuth from '../utils/mestoAuth.js'\r\nclass Register extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: ''\r\n        }\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n    handleChange(e) {\r\n        const { name, value } = e.target;\r\n        this.setState({\r\n            [name]: value\r\n        })\r\n    }\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        const { username, password } = this.state;\r\n        this.props.handleRegister(username, password);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"login\" >\r\n                <h2 className=\"login__welcome\">Регистрация</h2>\r\n                <form className=\"login__form\" onSubmit={this.handleSubmit}>\r\n                    <input required className=\"login__input\" name=\"username\" placeholder=\"Email\" type=\"text\" onChange={this.handleChange} value={this.state.username} />\r\n                    <input required className=\"login__input\" name=\"password\" placeholder=\"Пароль\" type=\"password\" onChange={this.handleChange} value={this.state.password} />\r\n                    <button type=\"submit\" className=\"login__btn\">Зарегистрироваться</button>\r\n                </form>\r\n                <div className=\"login__signup\">\r\n                    <p className=\"login__caption\">Уже зарегистрированы? </p>\r\n                    <Link to=\"/sign-in\" className=\"login__link\"> Войти</Link>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(Register);","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\" lang=\"en-GB\">&copy; 2021 Mesto Russia</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nfunction PopupWithForm({ name, title, btnCaption = \"Сохранить\", isOpen, onClose, children, onSubmit }) {\r\n    return (\r\n        <div className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`}>\r\n            <div className=\"popup__container\">\r\n                <button onClick={onClose} type=\"button\" className=\"popup__close-btn\" aria-label=\"Закрыть попап\"></button>\r\n                <form className=\"form\" name={`${name}-form`} onSubmit={onSubmit} noValidate>\r\n                    <h2 className=\"form__title\">{title}</h2>\r\n                    {children}\r\n                    <button type=\"submit\" className=\"form__save-btn\">{btnCaption}</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default PopupWithForm;","import React, { useState } from \"react\";\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [name, setName] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n    }, [currentUser, isOpen]);\r\n    function handleNameChange(e) {\r\n        setName(e.target.value)\r\n    }\r\n    function handleDecriptionChange(e) {\r\n        setDescription(e.target.value)\r\n    }\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateUser({\r\n            name: name,\r\n            about: description,\r\n        });\r\n    }\r\n    return (\r\n        <PopupWithForm name=\"edit\" title=\"Редактировать профиль\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n            <label className=\"form__field\">\r\n                <input type=\"text\" name=\"profile-name\" value={name} onChange={handleNameChange} placeholder=\"Имя\" className=\"form__input form__input_type_name\"\r\n                    id=\"name-input\" required minLength=\"2\" maxLength=\"40\" />\r\n                <span className=\"form__input-error name-input-error\"></span>\r\n            </label>\r\n            <label className=\"form__field\">\r\n                <input type=\"text\" name=\"profile-about\" value={description} onChange={handleDecriptionChange} placeholder=\"О себе\"\r\n                    className=\"form__input form__input_type_about\" id=\"about-input\" required minLength=\"2\"\r\n                    maxLength=\"200\" />\r\n                <span className=\"form__input-error about-input-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n    const urlRef = React.useRef();\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateAvatar(urlRef.current.value);\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm name=\"avatar\" title=\"Обновить аватар\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n            <label className=\"form__field\">\r\n                <input type=\"url\" ref={urlRef} name=\"avatar-link\" placeholder=\"ссылка на аватар\"\r\n                    className=\"form__input form__input_type_link\" id=\"avatar-link-input\" required />\r\n                <span className=\"form__input-error avatar-link-input-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React, { useEffect, useState } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n    const [name, setName] = useState('');\r\n    const [link, setLink] = useState('');\r\n    useEffect(() => {\r\n        setName('');\r\n        setLink('');\r\n    }, [isOpen]);\r\n    function handleNameChange(e) {\r\n        setName(e.target.value);\r\n    }\r\n    function handleLinkChange(e) {\r\n        setLink(e.target.value);\r\n    }\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onAddPlace({\r\n            name: name,\r\n            link: link,\r\n        });\r\n    }\r\n    return (\r\n        <PopupWithForm name=\"new-card\" title=\"Новое место\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n            <label className=\"form__field\">\r\n                <input type=\"text\" name=\"card-name\" value={name} onChange={handleNameChange} placeholder=\"Название\" className=\"form__input form__input_type_name\"\r\n                    id=\"card-name-input\" required minLength=\"2\" maxLength=\"30\" />\r\n                <span className=\"form__input-error card-name-input-error\"></span>\r\n            </label>\r\n            <label className=\"form__field\">\r\n                <input type=\"url\" name=\"card-link\" value={link} onChange={handleLinkChange} placeholder=\"Ссылка на картинку\"\r\n                    className=\"form__input form__input_type_about\" id=\"card-link-input\" required />\r\n                <span className=\"form__input-error card-link-input-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default AddPlacePopup;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction DeleteCardPopup({ isOpen, onClose, onDeleteCard, card }) {\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onDeleteCard(card);\r\n    }\r\n    return (\r\n        <PopupWithForm name=\"delete\" title=\"Вы уверены\" btnCaption=\"Да\" isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit} />\r\n    );\r\n}\r\n\r\nexport default DeleteCardPopup;","import React from 'react';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n\r\n    return (\r\n        <div className={`popup popup_type_image ${card ? 'popup_opened' : ''}`}>\r\n            <figure className=\"figure\">\r\n                <button onClick={onClose} type=\"button\" className=\"popup__close-btn\" aria-label=\"Закрыть попап\"></button>\r\n                <img className=\"figure__image\" src={card ? card.link : ''}\r\n                    alt={card ? card.name : ''} />\r\n                <figcaption className=\"figure__caption\">{card ? card.name : ''}</figcaption>\r\n            </figure>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","import React from \"react\";\r\nfunction InfoTooltip({ isOpen, onClose, registerStatus }) {\r\n    const { message, status } = registerStatus;\r\n    return (\r\n        <div className={`popup ${isOpen ? 'popup_opened' : ''}`}>\r\n            <div className=\"popup__container\">\r\n                <button onClick={onClose} type=\"button\" className=\"popup__close-btn\" aria-label=\"Закрыть попап\"></button>\r\n                <div className={`popup__status-${status}`}></div>\r\n                <p className=\"popup__caption\">{message}</p>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default InfoTooltip;","import React from \"react\";\r\nfunction Spinner() {\r\n    return (\r\n        <div className=\"spinner\" />\r\n    );\r\n}\r\nexport default Spinner;","\nimport React, { useState, useEffect } from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport * as mestoAuth from '../utils/mestoAuth.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport ProtectedRoute from './ProtectedRoute';\nimport Header from './Header';\nimport { api } from '../utils/api';\nimport Main from './Main';\nimport Login from './Login';\nimport Register from './Register';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport DeleteCardPopup from './DeleteCardPopup';\nimport ImagePopup from './ImagePopup';\nimport InfoTooltip from './InfoTooltip.js';\nimport Spinner from './Spinner.js';\nfunction App() {\n  const history = useHistory();\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userEmail, setUserEmail] = useState('');\n  const [currentUser, setCurrentUser] = useState({ name: '', about: '' });\n  const [registerStatus, setRegisterStatus] = useState({ message: '', status: false });\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [isDeletePopupOpen, setDeletePopupOpen] = useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\n  const [cards, setCards] = useState([]);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [cardToDelete, setCardToDelete] = useState(null);\n\n  useEffect(() => {\n    handleTokenCheck();\n  }, []);\n\n  useEffect(() => {\n    if (loggedIn) {\n      Promise.all([api.getInitialInfo(), api.getInitialCards()])\n        .then(([info, cardsArr]) => {\n          setCurrentUser(info);\n          setCards(cardsArr);\n          setIsLoading(false);\n        })\n        .catch(err => console.log(err));\n    }\n  }, [loggedIn]);\n\n  function handleTokenCheck() {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      mestoAuth.checkToken(jwt)\n        .then((res) => {\n          setLoggedIn(true);\n          setUserEmail(res.data.email);\n          history.push('/');\n        })\n        .catch(err => console.log(err));\n    }\n  }\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(err => console.log(err));\n  }\n  function handleSubmitDeleteCard(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n        closeAllPopups();\n      })\n      .catch(err => console.log(err));\n  }\n  function handleCardDelete(card) {\n    setCardToDelete(card);\n    setDeletePopupOpen(true);\n  }\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setDeletePopupOpen(false);\n    setSelectedCard(null);\n    setIsInfoTooltipOpen(false);\n  }\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n  function handleUpdateUser(info) {\n    api.setUserInfo(info)\n      .then(res => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err));\n  }\n  function handleUpdateAvatar(link) {\n    api.setUserAvatar(link)\n      .then(info => {\n        setCurrentUser(info);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err));\n  }\n  function handleAddPlaceSubmit(card) {\n    api.createNewCard(card)\n      .then(newCard => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err));\n  }\n  function handleLogin(username, password) {\n    mestoAuth.authorize(username, password)\n      .then((res) => {\n        if (res.token) {\n          localStorage.setItem('jwt', res.token);\n          setLoggedIn(true);\n          history.push('/');\n        }\n      })\n      .catch(err => console.log(err));\n  }\n  function handleSignOut() {\n    localStorage.removeItem('jwt');\n    setUserEmail('');\n    setLoggedIn(false);\n  }\n  function handleRegister(username, password) {\n    mestoAuth.register(username, password)\n      .then(() => {\n        history.push('/sign-in');\n        setRegisterStatus({ message: 'Вы успешно зарегистрировались!', status: 'true' });\n      })\n      .catch(() => {\n        setRegisterStatus({ message: 'Что-то пошло не так! Попробуйте ещё раз.', status: 'false' })\n      })\n    setIsInfoTooltipOpen(true);\n  }\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header userEmail={userEmail} handleSignOut={handleSignOut} />\n        <Switch>\n          <Route path=\"/sign-up\">\n            <Register handleRegister={handleRegister} />\n          </Route>\n          <Route path=\"/sign-in\">\n            <Login handleLogin={handleLogin} />\n          </Route>\n          <ProtectedRoute path=\"/\" loggedIn={loggedIn} component={isLoading ? Spinner : Main} onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick} onCardClick={handleCardClick} cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete} />\n        </Switch>\n        <Footer />\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\n        <DeleteCardPopup isOpen={isDeletePopupOpen} onClose={closeAllPopups} onDeleteCard={handleSubmitDeleteCard} card={cardToDelete} />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n        <InfoTooltip isOpen={isInfoTooltipOpen} onClose={closeAllPopups} registerStatus={registerStatus} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\nreportWebVitals();\n"],"sourceRoot":""}